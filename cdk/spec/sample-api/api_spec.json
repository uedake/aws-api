{
    "stack": "sample-api-stack",
    "service_name": "sample-service",
    "api_name": "sample-api",
    "lambda_handler": "api.lambda_function.lambda_handler",
    "repository_root": "https://github.com/uedake",
    "tags": {
        "tag_key": "tag_val"
    },
    "default_runtime": "PYTHON_3_13",
    "lambda_common_managed_policy": [
        "service-role/AWSBatchServiceEventTargetRole",
        "service-role/AWSLambdaRole",
        "AmazonSQSFullAccess",
        "AmazonS3FullAccess",
        "AmazonElasticFileSystemClientReadWriteAccess"
    ],
    "branch": {
        "main": {
            "apigw_stage": "$default",
            "bucket": "{$service_name}-{$account}",
            "amplify_type": "BETA"
        },
        "dev": {
            "apigw_stage": "dev",
            "bucket": "{$service_name}-{$account}",
            "amplify_type": "DEVELOPMENT"
        },
        "test": {
            "apigw_stage": "test",
            "bucket": "{$service_name}-test-{$account}",
            "amplify_type": "EXPERIMENTAL"
        }
    },
    "s3": {
        "{$service_name}-{$account}": {
            "public_read": false
        },
        "{$service_name}-test-{$account}": {
            "public_read": false
        }
    },
    "apigw": {
        "description": "api for calling sample lambdas",
        "domain": "wal-test.com",
        "lambda_integration": {
            "pipeline_entry": {
                "route": [
                    "GET /pipeline_entry/{path1}",
                    "GET /pipeline_entry"
                ]
            },
            "s3_access": {
                "openapi_yaml": "src_lambda/s3_access/openapi.yaml"
            },
            "echo_with_auth": {
                "cognito_auth": {
                    "user": "developer",
                    "app": "aws-sample-app"
                },
                "route": [
                    "GET /echo_with_auth/{path1}",
                    "GET /echo_with_auth",
                    "POST /echo_with_auth/{path1}",
                    "POST /echo_with_auth"
                ]
            },
            "echo": {
                "route": [
                    "GET /echo/{path1}",
                    "GET /echo",
                    "POST /echo/{path1}",
                    "POST /echo"
                ]
            },
            "numpy": {
                "fastapi_app": "app"
            },
            "permit_iotcore_access": {
                "route": [
                    "GET /permit_iotcore_access"
                ]
            }
        }
    },
    "sns": {
        "amplify_state_change": {
            "description": "CI/CD用",
            "lambda_func": {
                "notify_teams": {
                    "code": "src_lambda/notify_teams/src",
                    "timeout": 3
                }
            }
        }
    },
    "lambda_func": {
        "pipeline_entry": {
            "code": "src_lambda/pipeline_entry/src",
            "timeout": 3,
            "queue_next": "pipeline_process"
        },
        "pipeline_process": {
            "code": "src_lambda/pipeline_process/src",
            "timeout": 10,
            "queue": {
                "additional_timeout": 10
            }
        },
        "s3_access": {
            "code": "src_lambda/s3_access/src",
            "timeout": 10
        },
        "echo": {
            "code": "src_lambda/echo/src",
            "timeout": 3
        },
        "echo_with_auth": {
            "code": "src_lambda/echo/src",
            "timeout": 3
        },
        "called_by_batch": {
            "code": "src_lambda/called_by_batch/src",
            "timeout": 3
        },
        "numpy": {
            "code": "src_lambda/numpy/src",
            "timeout": 3,
            "layer_list": [
                "pandas_py313",
                "fastapi_py313"
            ]
        },
        "permit_iotcore_access": {
            "code": "src_lambda/permit_iotcore_access/src",
            "timeout": 10,
            "managed_policy": [
                "AWSIoTFullAccess"
            ]
        }
    },
    "batch_func": {
        "convert": {
            "queue_state_lambda": "called_by_batch",
            "maxv_cpus": 40,
            "memory": 8192,
            "vcpu": 4
        }
    },
    "amplify": {
        "aws-sample-app": {
            "description": "サンプルアプリ",
            "cognito_auth": "developer",
            "domain": "wal-test.com",
            "deploy_event_sns": "amplify_state_change",
            "inline_policy": [
                "iam_policy/cognito_default.json"
            ],
            "managed_policy": [
                "AWSIoTDataAccess",
                "AWSIoTConfigAccess"
            ]
        }
    },
    "ref": {
        "lambda_layer": {
            "pandas_py313": "arn:aws:lambda:ap-northeast-1:336392948345:layer:AWSSDKPandas-Python313:4",
            "pandas_py312": "arn:aws:lambda:ap-northeast-1:336392948345:layer:AWSSDKPandas-Python312:19",
            "fastapi_py313": "arn:aws:lambda:ap-northeast-1:821721610090:layer:fastapi-py313:2"
        },
        "vpc": {
            "subnet_id_list": [],
            "security_group_id": ""
        },
        "cognito": {
            "developer": {
                "user_pool_id": "ap-northeast-1_kw2EVel03"
            }
        }
    }
}